**플러시(Flush)** 는 엔티티 매니저가 관리하는 엔티티 객체의 변경 사항을 데이터베이스에 반영하는 작업이다. 엔티티 객체에서 발생한 생성, 수정, 삭제 등의 변경 사항을 데이터베이스와 동기화한다. 영속성 컨텍스트의 변경 내용을 데이터베이스에 반영하는 것이 플러시의 핵심 역할입니다.

#### 플러시의 이용

- 개발자가 직접 플러시 메서드를 호출할 수 있다.
- 트랜잭션 커밋 시 자동으로 플러시가 실행된다.
- 쿼리를 실행할 때 자동으로 플러시가 실행된다.
- 데이터베이스 트랜잭션 개념과 함께 플러시가 동작할 수 있다.

#### 플러시의 장점

- 변경 사항을 즉시 데이터베이스에 반영하지 않고 지연시킬 수 있어 성능 향상이 가능하다.
- 변경 사항을 한 번에 모아서 데이터베이스에 반영하므로 효율적이다.
- 트랜잭션 경계 내에서 변경 사항을 관리할 수 있어 데이터 일관성을 보장할 수 있다.

즉, 플러시는 엔티티 매니저가 관리하는 엔티티 객체의 변경 사항을 데이터베이스에 반영하는 작업이다. 이를 통해 성능 향상, 효율적인 데이터베이스 접근, 데이터 일관성 유지 등의 장점을 얻을 수 있다. 또한 데이터베이스 트랜잭션과 함께 플러시가 동작하여 데이터 무결성을 보장한다.

#### 사용예시
~~~java
// 엔티티 매니저 주입
@PersistenceContext
private EntityManager em;

public void createAndUpdateUser() {
    // 새로운 사용자 생성
    User user = new User();
    user.setName("John Doe");
    em.persist(user);

    // 사용자 정보 수정
    user.setName("Jane Doe");

    // 플러시 호출
    em.flush();

    // 데이터베이스에 변경 내용 반영
    // 이후 쿼리 실행 시 변경된 사용자 정보 반영
}
~~~
1. 새로운 사용자 엔티티를 생성하고 `persist()` 메서드로 영속성 컨텍스트에 저장한다.
2. 사용자 정보를 수정한다.
3. `em.flush()` 메서드를 호출하여 영속성 컨텍스트의 변경 내용을 데이터베이스에 즉시 반영한다.
4. 이후 쿼리를 실행하면 데이터베이스에 반영된 변경 사항을 조회할 수 있다.

[[영속성 컨텍스트]]
[[트랜젝션(Transaction)]]